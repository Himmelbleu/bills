var l;(i=>{i.RECORD="record",i.TALLY_PAD="tally_pad",i.COMMENTS="comments",i.VIEW_DATE="view_date"})(l||(l={}));var m;(i=>{function p(){const c=new Promise((n,e)=>{const r=indexedDB.open(l.TALLY_PAD);r.onsuccess=function(o){const t=o.target.result;n(t)},r.onerror=function(){e(new Error("创建数据库失败！"))},r.onupgradeneeded=function(o){const t=o.target.result,u=t.createObjectStore(l.RECORD,{keyPath:"id"}),d=t.createObjectStore(l.COMMENTS,{keyPath:"id"}),s=t.createObjectStore(l.VIEW_DATE,{keyPath:"id"});u.add({id:"2024",items:{1:{balance:[],surplus:0,budget:0}}}),d.add({id:"0",items:[{value:"生活费",cost:1800,type:"支"}]}),s.add({id:"0",Y:"2024",M:"1"})}});return c.catch(n=>{console.error(n)}),c}i.create=p;function w(c,n,e,r){const o=new Promise((t,u)=>{const a=c.transaction([n],"readwrite").objectStore(n).add(e,r);a.onsuccess=function(){t(c)},a.onerror=function(){u(new Error("插入数据错误！"))}});return o.catch(t=>{console.error(t)}),o}i.add=w;function g(c,n,e){const r=new Promise((o,t)=>{const s=c.transaction([n],"readwrite").objectStore(n).delete(e);s.onsuccess=function(){o(c)},s.onerror=function(){t(new Error("删除数据错误！"))}});return r.catch(o=>{console.error(o)}),r}i.drop=g;function E(c,n,e,r){const o=new Promise((t,u)=>{const s=c.transaction([n],"readwrite").objectStore(n),a=s.get(r);a.onsuccess=function(){s.put(e).onsuccess=function(){t(c)}},a.onerror=function(){u(new Error("更新数据错误！"))}});return o.catch(t=>{console.error(t)}),o}i.put=E;function P(c,n,e){const r=new Promise((o,t)=>{const d=c.transaction([n],"readwrite").objectStore(n);if(e){const s=d.get(e);s.onsuccess=function(){const a=s.result;o(a||null)},s.onerror=function(){t(null)}}else{const s=d.openCursor(),a=[];s.onsuccess=function(y){const f=y.target.result;f?(a.push(f.value),f.continue()):o(a)},s.onerror=function(){t(null)}}});return r.catch(o=>{console.error(o)}),r}i.get=P;function S(c,n){const e=new Promise((r,o)=>{const u=c.transaction([n],"readonly").objectStore(n).getAllKeys();u.onsuccess=function(d){r(d.target.result)},u.onerror=function(){o(null)}});return e.catch(r=>{console.error(r)}),e}i.keys=S;function h(c){const n=new Promise((e,r)=>{const o=indexedDB.deleteDatabase(c);o.onsuccess=function(){e(null)},o.onerror=function(){r(null)},o.onblocked=function(){r(null)}});return n.catch(e=>{console.error(e)}),n}i.del=h;function q(c,n){return new Promise((e,r)=>{const u=c.transaction([n],"readwrite").objectStore(n).clear();u.onsuccess=function(){e("")},u.onerror=function(){r("")}})}i.clear=q;function j(c,n,e){const t=c.transaction([e],"readwrite").objectStore(e).add(n);t.onsuccess=function(){console.log("Data added: ",n)},t.onerror=function(){console.error("Error adding data: ")}}i.leadIn=j})(m||(m={}));export{l as C,m as D};
