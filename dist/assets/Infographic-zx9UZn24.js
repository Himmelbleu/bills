import{D as p,C as k,U as E}from"./index-Kkdcv9lI.js";import{d as U,n as v,r as V,c as r,g as n,t as f,u as d,F as x,f as b,a as j,o as l,b as N,s as A}from"./index-gmwYwQkK.js";const P=n("div",{class:"mb-4"},[n("div",null,"收支统计"),n("div",{class:"text-0.8rem text-text-secondary"},"统计收支情况")],-1),T={class:"mb-4 f-c-b flex-nowrap"},W={class:"flex-basis-50% max-w-50%"},F={class:"text-0.8rem"},I={class:"text-gray"},L={class:"flex-basis-50% max-w-50%"},R={class:"text-0.8rem"},S={class:"text-red"},Y={class:"flex-basis-50% max-w-50%"},q={class:"text-0.8rem"},z={class:"text-green"},G={key:0},H=n("div",null,"支出",-1),J={class:"mt-2 f-c-b flex-wrap"},K={class:"mb-4 flex-basis-50% max-w-50%"},M={key:1,class:"mt-4"},Q=n("div",null,"收入",-1),X={class:"mt-2 f-c-b flex-wrap"},Z={class:"mb-4 flex-basis-50% max-w-50%"},st=U({__name:"Infographic",async setup($){let c,_;const y=([c,_]=v(()=>p.create()),c=await c,_(),c),D=([c,_]=v(()=>p.get(y,k.VIEW_DATE,"0")),c=await c,_(),c),h=V(([c,_]=v(()=>p.get(y,k.RECORD,D.Y)),c=await c,_(),c));function O(i){const t={};for(const o in i.items)if(i.items.hasOwnProperty(o)){const e=i.items[o];e.balance&&e.balance.forEach(s=>{const{type:a,text:u}=s;t[a]||(t[a]={}),t[a][u]||(t[a][u]=[]),t[a][u].push(s)})}return t}function g(i){let t=0;function o(e){for(let s in e)Array.isArray(e[s])?e[s].forEach(a=>{a.hasOwnProperty("cost")&&(t+=Number(a.cost))}):typeof e[s]=="object"&&e[s]!==null&&o(e[s])}return o(i),E.formatNumberWithUnits(t)}function w(i){let t=0;function o(e){for(let s in e)Array.isArray(e[s])?t+=e[s].length:typeof e[s]=="object"&&e[s]!==null&&o(e[s])}return o(i),t}function B(i){let t=0;for(let o in i)i.hasOwnProperty(o)&&(t+=Number(i[o].budget));return E.formatNumberWithUnits(t)}const m=O(h.value);function C(i){if(!i.length)return 0;let t=0;return i.forEach(o=>t+=Number(o.cost)),t}return(i,t)=>{const o=j("el-statistic");return l(),r("div",null,[P,n("div",T,[n("div",W,[n("div",F,"预算 ("+f(Object.keys(d(h).items).length)+")",1),n("div",I,f(B(d(h).items)),1)]),n("div",L,[n("div",R,"支出 ("+f(w(d(m).支||[]))+")",1),n("div",S,f(g(d(m).支||[])),1)]),n("div",Y,[n("div",q,"收入 ("+f(w(d(m).收||[]))+")",1),n("div",z,f(g(d(m).收||[])),1)])]),(l(!0),r(x,null,b(d(m),(e,s)=>(l(),r("div",null,[s==="支"?(l(),r("div",G,[H,n("div",J,[(l(!0),r(x,null,b(e,(a,u)=>(l(),r("div",K,[N(o,{precision:2,title:u+" ("+a.length+")",value:C(a)},null,8,["title","value"])]))),256))])])):A("",!0),s==="收"?(l(),r("div",M,[Q,n("div",X,[(l(!0),r(x,null,b(e,(a,u)=>(l(),r("div",Z,[N(o,{precision:2,title:u+" ("+a.length+")",value:C(a)},null,8,["title","value"])]))),256))])])):A("",!0)]))),256))])}}});export{st as default};
