import{D as e,C as t,U as h}from"./index-Kkdcv9lI.js";import{d as E,n as C,c as y,g as c,b as d,w as _,a as m,o as D,e as f}from"./index-gmwYwQkK.js";const g=c("div",{class:"mb-4"},[c("div",null,"设置"),c("div",{class:"text-0.8rem text-text-secondary"},"一些设置和管理")],-1),O={class:"flex-wrap f-c-b"},R={class:"f-c-c flex-basis-33.33% max-w-33.33%"},T={class:"f-c-c flex-basis-33.33% max-w-33.33%"},S=E({__name:"Settings",async setup(v){let p,u;const a=([p,u]=C(()=>e.create()),p=await p,u(),p);async function w(){const l=await e.get(a,t.RECORD),n=await e.get(a,t.COMMENTS,"0"),s=await e.get(a,t.VIEW_DATE,"0"),r=new Blob([JSON.stringify([{records:l,comments:n,datetime:s}])],{type:"text/json"}),i=document.createElement("a"),o=h.Dates.generateDate();i.download=`${o.y}-${o.m}-${o.d}${o.h}${o.minute}${o.second}.json`,i.href=URL.createObjectURL(r),i.click()}const x=async l=>{if(l.raw){const n=new FileReader;n.readAsText(l.raw),n.onload=()=>{const s=JSON.parse(n.result.toString());e.clear(a,t.RECORD).then(()=>{s[0].records.forEach(r=>{e.leadIn(a,r,t.RECORD)})}),e.clear(a,t.COMMENTS).then(()=>{e.leadIn(a,s[0].comments,t.COMMENTS)}),e.clear(a,t.VIEW_DATE).then(()=>{e.leadIn(a,s[0].datetime,t.VIEW_DATE)})}}};async function b(){await e.del(t.TALLY_PAD)}return(l,n)=>{const s=m("el-button"),r=m("el-upload"),i=m("el-popconfirm");return D(),y("div",null,[g,c("div",O,[c("div",R,[d(s,{plain:"",round:"",type:"primary",onClick:w},{default:_(()=>[f("导出数据")]),_:1})]),d(r,{"auto-upload":!1,limit:1,"on-change":x,"show-file-list":!1,accept:"application/json",class:"f-c-c flex-basis-33.33% max-w-33.33%"},{default:_(()=>[d(s,{plain:"",round:"",type:"success"},{default:_(()=>[f("导入数据")]),_:1})]),_:1}),c("div",T,[d(i,{title:"确定清除数据？",onConfirm:b},{reference:_(()=>[d(s,{plain:"",round:"",type:"danger"},{default:_(()=>[f("清除数据")]),_:1})]),_:1})])])])}}});export{S as default};
