import{D as O,C as y}from"./index-BxJgwICe.js";import{U as C,d as ue}from"./index-CWfMPyB5.js";import{d as H,r as h,a as m,o as V,c as E,b as t,w as o,e as $,u as e,t as S,F as U,f as G,g as r,i as L,h as z,j as de,k as Z,E as A,p as be,l as fe,_ as ve,m as ie,n as X,q as Q,v as W}from"./index-BkavPUQI.js";/* empty css                   */const ye={class:"f-c-c w-100%"},ge=r("div",{class:"i-tabler-trash"},null,-1),xe=r("div",{class:"i-tabler-x"},null,-1),De=H({__name:"DeleteItem",props:{database:{type:Object},data:{type:Object,required:!0},value:{type:Object,required:!0},currY:{type:String,required:!0},currM:{type:String,required:!0},index:{type:Number,required:!0}},setup(b){const d=b,s=h(!1);async function u(){d.data.items[d.currM].balance.splice(d.index,1),await O.put(d.database,y.DB_RECORD,C.Objects.raw(d.data),d.currY),s.value=!s.value}return(n,a)=>{const i=m("el-button"),l=m("el-form-item"),f=m("el-date-picker"),k=m("el-radio"),M=m("el-radio-group"),w=m("el-form"),N=m("el-dialog");return V(),E("div",null,[t(i,{size:"small",text:"",type:"danger",onClick:a[0]||(a[0]=x=>s.value=!e(s))},{default:o(()=>[$(" 删除收支 ")]),_:1}),t(N,{modelValue:e(s),"onUpdate:modelValue":a[4]||(a[4]=x=>L(s)?s.value=x:null),"append-to-body":"",title:"删除收支提示",width:"90%"},{default:o(()=>[t(w,{ref:"formInst","hide-required-asterisk":"","label-position":"left","label-width":"auto","status-icon":""},{default:o(()=>[t(l,{label:"备注",prop:"text"},{default:o(()=>[$(S(b.data.items[b.currM].balance[b.index].text),1)]),_:1}),t(l,{label:"金额",prop:"cost"},{default:o(()=>[$(S(b.data.items[b.currM].balance[b.index].cost),1)]),_:1}),t(l,{label:"日期时间",prop:"datetime"},{default:o(()=>[t(f,{modelValue:b.data.items[b.currM].balance[b.index].datetime,"onUpdate:modelValue":a[1]||(a[1]=x=>b.data.items[b.currM].balance[b.index].datetime=x),disabled:"",placeholder:"请输入日期时间",style:{width:"100%"},type:"date"},null,8,["modelValue"])]),_:1}),t(l,{label:"类型",prop:"type"},{default:o(()=>[t(M,{modelValue:b.data.items[b.currM].balance[b.index].type,"onUpdate:modelValue":a[2]||(a[2]=x=>b.data.items[b.currM].balance[b.index].type=x)},{default:o(()=>[(V(),E(U,null,G(["支","收"],x=>t(k,{label:x,value:x,disabled:""},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(l,{class:"mt-10"},{default:o(()=>[r("div",ye,[t(i,{class:"mr-4",plain:"",round:"",type:"danger",onClick:u},{icon:o(()=>[ge]),_:1}),t(i,{plain:"",round:"",type:"primary",onClick:a[3]||(a[3]=x=>s.value=!e(s))},{icon:o(()=>[xe]),_:1})])]),_:1})]),_:1},512)]),_:1},8,["modelValue"])])}}}),Ce={class:"f-c-c w-100%"},Oe=r("div",{class:"i-tabler-x"},null,-1),he=r("div",{class:"i-tabler-check"},null,-1),Ve=H({__name:"UpdateItem",props:{database:{type:Object},data:{type:Object,required:!0},value:{type:Object,required:!0},index:{type:Number,required:!0},currM:{type:String,required:!0},currY:{type:String,required:!0}},async setup(b){let d,s;const u=b,n=h(!1),a=h(),i=h({cost:[{validator:C.Forms.validateMoney,trigger:"change"}],text:[{required:!0,message:"请输入收支备注",trigger:"blur"},{min:1,max:50,message:"长度在1~50个字符之间",trigger:"blur"}],datetime:[{required:!0,message:"请输入日期时间",trigger:"change"}]}),l=h({...u.value}),{items:f}=([d,s]=z(()=>O.get(u.database,y.DB_COMMENTS,y.DB_KEY_COMMENTS)),d=await d,s(),d),k=h(f),M=(c,_)=>{const Y=c?k.value.filter(C.createFilter(c)):k.value;_(Y)};function w(c){l.value.cost=c.cost}function N(){l.value={...u.value},n.value=!n.value}function x(){C.Forms.formValidator(a.value,async()=>{const c=u.data.items[u.currM].balance.findIndex(_=>_.id===l.value.id);c!=-1?(u.data.items[u.currM].balance[c]=l.value,await O.put(u.database,y.DB_RECORD,C.Objects.raw(u.data),u.currY),n.value=!n.value):A.error("未找到更新的收支项")},()=>{A.error("检查输入的值是否正确")})}return(c,_)=>{const Y=m("el-button"),B=m("el-autocomplete"),I=m("el-form-item"),K=m("el-input"),T=m("el-date-picker"),D=m("el-radio"),g=m("el-radio-group"),v=m("el-form"),F=m("el-dialog");return V(),E("div",null,[t(Y,{size:"small",text:"",type:"primary",onClick:N},{default:o(()=>[$("编辑收支")]),_:1}),t(F,{modelValue:e(n),"onUpdate:modelValue":_[5]||(_[5]=p=>L(n)?n.value=p:null),"append-to-body":"",title:"修改支出项",width:"90%"},{default:o(()=>[t(v,{ref_key:"formInst",ref:a,model:e(l),rules:e(i),"hide-required-asterisk":"","label-position":"left","label-width":"auto","status-icon":""},{default:o(()=>[t(I,{label:"备注",prop:"text"},{default:o(()=>[t(B,{modelValue:e(l).text,"onUpdate:modelValue":_[0]||(_[0]=p=>e(l).text=p),"fetch-suggestions":M,"prefix-icon":e(de),placeholder:"请输入收支备注",style:{width:"100%"},onSelect:w},null,8,["modelValue","prefix-icon"])]),_:1}),t(I,{label:"花费",prop:"cost"},{default:o(()=>[t(K,{modelValue:e(l).cost,"onUpdate:modelValue":_[1]||(_[1]=p=>e(l).cost=p),modelModifiers:{number:!0},"prefix-icon":e(Z),placeholder:"请输入收支金额",type:"number"},null,8,["modelValue","prefix-icon"])]),_:1}),t(I,{label:"日期时间",prop:"datetime"},{default:o(()=>[t(T,{modelValue:e(l).datetime,"onUpdate:modelValue":_[2]||(_[2]=p=>e(l).datetime=p),"disabled-date":p=>e(ue)(p,b.currY,b.currM),placeholder:"请输入日期时间",style:{width:"100%"},type:"date"},null,8,["modelValue","disabled-date"])]),_:1}),t(I,{label:"类型",prop:"type"},{default:o(()=>[t(g,{modelValue:e(l).type,"onUpdate:modelValue":_[3]||(_[3]=p=>e(l).type=p)},{default:o(()=>[(V(),E(U,null,G(["支","收"],p=>t(D,{value:p},{default:o(()=>[$(S(p),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(I,{class:"mt-10"},{default:o(()=>[r("div",Ce,[t(Y,{class:"mr-4",plain:"",round:"",onClick:_[4]||(_[4]=p=>n.value=!e(n))},{icon:o(()=>[Oe]),_:1}),t(Y,{plain:"",round:"",type:"primary",onClick:x},{icon:o(()=>[he]),_:1})])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),ce=b=>(be("data-v-8ff2bb7b"),b=b(),fe(),b),we={class:"f-c-c w-100%"},ke=ce(()=>r("div",{class:"i-tabler-x"},null,-1)),Me=ce(()=>r("div",{class:"i-tabler-check"},null,-1)),Ye=H({__name:"AddItem",props:{database:{type:Object},data:{type:Object,required:!0},currY:{type:String,required:!0},currM:{type:String,required:!0}},async setup(b){let d,s;const u=b,n=h(!1),a=h({id:"",cost:0,text:"",type:"支",datetime:C.Dates.nowDate("YY-MM-DD",new Date(Number(u.currY),Number(u.currM)-1))}),i=h(),l=h({cost:[{validator:C.Forms.validateMoney,trigger:"change"}],text:[{required:!0,message:"请输入收支备注",trigger:"change"},{min:1,max:50,message:"长度在1~50个字符之间",trigger:"change"}],datetime:[{required:!0,message:"请输入日期时间",trigger:"change"}]}),{items:f}=([d,s]=z(()=>O.get(u.database,y.DB_COMMENTS,y.DB_KEY_COMMENTS)),d=await d,s(),d),k=h(f);function M(){C.Forms.formValidator(i.value,async()=>{a.value.id=C.generateRandomHash(),u.data.items[u.currM].balance.push({...a.value}),await O.put(u.database,y.DB_RECORD,C.Objects.raw(u.data),u.currY),n.value=!n.value},()=>{A.error("检查输入的值是否正确")})}const w=(c,_)=>{const Y=c?k.value.filter(C.createFilter(c)):k.value;_(Y)};function N(c){a.value.text=c.value,a.value.cost=c.cost,a.value.type=c.type}function x(){i.value.resetFields(),a.value.datetime=C.Dates.nowDate("YY-MM-DD",new Date(Number(u.currY),Number(u.currM)-1))}return(c,_)=>{const Y=m("el-button"),B=m("el-autocomplete"),I=m("el-form-item"),K=m("el-input"),T=m("el-date-picker"),D=m("el-radio"),g=m("el-radio-group"),v=m("el-form"),F=m("el-dialog");return V(),E("div",null,[t(Y,{plain:"",round:"",size:"small",type:"success",onClick:_[0]||(_[0]=p=>n.value=!e(n))},{default:o(()=>[$("添加收支")]),_:1}),t(F,{modelValue:e(n),"onUpdate:modelValue":_[6]||(_[6]=p=>L(n)?n.value=p:null),"append-to-body":"",title:"添加收支",width:"90%",onOpened:x},{default:o(()=>[t(v,{ref_key:"formInst",ref:i,model:e(a),rules:e(l),"hide-required-asterisk":"","label-position":"left","label-width":"auto","status-icon":""},{default:o(()=>[t(I,{label:"备注",prop:"text"},{default:o(()=>[t(B,{modelValue:e(a).text,"onUpdate:modelValue":_[1]||(_[1]=p=>e(a).text=p),"fetch-suggestions":w,"prefix-icon":e(de),placeholder:"请输入收支备注",style:{width:"100%"},onSelect:N},null,8,["modelValue","prefix-icon"])]),_:1}),t(I,{label:"花费",prop:"cost"},{default:o(()=>[t(K,{modelValue:e(a).cost,"onUpdate:modelValue":_[2]||(_[2]=p=>e(a).cost=p),"prefix-icon":e(Z),placeholder:"请输入收支金额",type:"number"},null,8,["modelValue","prefix-icon"])]),_:1}),t(I,{label:"日期时间",prop:"datetime"},{default:o(()=>[t(T,{modelValue:e(a).datetime,"onUpdate:modelValue":_[3]||(_[3]=p=>e(a).datetime=p),"disabled-date":p=>e(ue)(p,b.currY,b.currM),placeholder:"请输入日期时间",style:{width:"100%"},type:"date"},null,8,["modelValue","disabled-date"])]),_:1}),t(I,{label:"类型",prop:"type"},{default:o(()=>[t(g,{modelValue:e(a).type,"onUpdate:modelValue":_[4]||(_[4]=p=>e(a).type=p)},{default:o(()=>[(V(),E(U,null,G(["支","收"],p=>t(D,{label:p,value:p},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(I,{class:"mt-10"},{default:o(()=>[r("div",we,[t(Y,{class:"mr-4",plain:"",round:"",onClick:_[5]||(_[5]=p=>n.value=!e(n))},{icon:o(()=>[ke]),_:1}),t(Y,{plain:"",round:"",type:"primary",onClick:M},{icon:o(()=>[Me]),_:1})])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),Re=ve(Ye,[["__scopeId","data-v-8ff2bb7b"]]),Ee={class:"f-c-c w-100%"},Be=r("div",{class:"i-tabler-x"},null,-1),Ie=r("div",{class:"i-tabler-check"},null,-1),Ne=H({__name:"UpdateRecord",props:{database:{type:Object,required:!0},data:{type:Object,required:!0},currM:{type:String,required:!0},currY:{type:String,required:!0}},setup(b){var f,k;const d=b,s=h(!1),u=h(),n=h({budget:[{validator:C.Forms.validateMoney,trigger:"change"}]}),a=ie({budget:((k=(f=d.data)==null?void 0:f.items[d.currM])==null?void 0:k.budget)||0});function i(){var M,w;a.budget=((w=(M=d.data)==null?void 0:M.items[d.currM])==null?void 0:w.budget)||0,s.value=!s.value}function l(){C.Forms.formValidator(u.value,async()=>{d.data.items[d.currM].budget=Number(a.budget),await O.put(d.database,y.DB_RECORD,C.Objects.raw(d.data),d.currY),s.value=!s.value},()=>{A.error("检查输入的值是否正确")})}return(M,w)=>{const N=m("el-button"),x=m("el-input"),c=m("el-form-item"),_=m("el-form"),Y=m("el-dialog");return V(),E("div",null,[t(N,{plain:"",round:"",size:"small",type:"info",onClick:i},{default:o(()=>[$("修改记录")]),_:1}),t(Y,{modelValue:e(s),"onUpdate:modelValue":w[2]||(w[2]=B=>L(s)?s.value=B:null),"append-to-body":"",title:"修改记录",width:"90%"},{default:o(()=>[t(_,{ref_key:"formInst",ref:u,model:e(a),rules:e(n),"hide-required-asterisk":"","label-position":"left","status-icon":""},{default:o(()=>[t(c,{label:"预算",prop:"budget"},{default:o(()=>[t(x,{modelValue:e(a).budget,"onUpdate:modelValue":w[0]||(w[0]=B=>e(a).budget=B),"prefix-icon":e(Z),type:"number"},null,8,["modelValue","prefix-icon"])]),_:1}),t(c,{class:"mt-10"},{default:o(()=>[r("div",Ee,[t(N,{class:"mr-4",plain:"",round:"",onClick:w[1]||(w[1]=B=>s.value=!e(s))},{icon:o(()=>[Be]),_:1}),t(N,{plain:"",round:"",type:"primary",onClick:l},{icon:o(()=>[Ie]),_:1})])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),Fe=r("div",{class:"i-tabler-calendar"},null,-1),qe={class:"f-c-c w-100%"},Se=r("div",{class:"i-tabler-x"},null,-1),$e=r("div",{class:"i-tabler-check"},null,-1),je=H({__name:"CreateRecord",props:{database:{type:Object},data:{type:Object,required:!0},currM:{type:String,required:!0},currY:{type:String,required:!0},mList:{type:Array,required:!0}},emits:["onCreated"],async setup(b,{emit:d}){let s,u;const n=b,a=d,i=([s,u]=z(()=>O.get(n.database,y.DB_CONFIG,y.DB_KEY_CONFIG)),s=await s,u(),s),l=h(!1),f=ie({year:n.currY,month:"1月",budget:i.budget}),k=h(),M=h();function w(){C.Forms.formValidator(k.value,()=>{const x=f.month.split("月")[0];f.year!=n.currY?O.get(n.database,y.DB_RECORD,f.year).then(c=>{c?Object.keys(c.items).includes(x)?A.error("已有该记录"):(c.items[x]={surplus:0,budget:f.budget,balance:[]},O.put(n.database,y.DB_RECORD,C.Objects.raw(c),n.currY).then(()=>{l.value=!l.value,a("onCreated",f.year)})):O.add(n.database,y.DB_RECORD,{id:f.year,items:{[x]:{budget:f.budget,surplus:0,balance:[]}}}).then(()=>{l.value=!l.value,a("onCreated",f.year)})}):n.mList.includes(x)?A.error("已有该记录"):(n.data.items[x]={surplus:0,budget:f.budget,balance:[]},O.put(n.database,y.DB_RECORD,C.Objects.raw(n.data),n.currY).then(()=>{l.value=!l.value,a("onCreated",f.year)}))},()=>A.error("创建记录失败"))}const N=Array.from({length:12},(x,c)=>({value:`${c+1}`,label:`${c+1}`}));return(x,c)=>{const _=m("el-button"),Y=m("el-date-picker"),B=m("el-form-item"),I=m("el-option"),K=m("el-select"),T=m("el-input"),D=m("el-form"),g=m("el-dialog");return V(),E("div",null,[t(_,{plain:"",round:"",size:"small",type:"primary",onClick:c[0]||(c[0]=v=>l.value=!e(l))},{default:o(()=>[$("创建记录")]),_:1}),t(g,{modelValue:e(l),"onUpdate:modelValue":c[5]||(c[5]=v=>L(l)?l.value=v:null),"append-to-body":"",title:"创建记录",width:"90%",onOpened:c[6]||(c[6]=v=>e(k).resetFields())},{default:o(()=>[t(D,{ref_key:"formInst",ref:k,model:e(f),rules:e(M),"hide-required-asterisk":"","label-position":"left","status-icon":""},{default:o(()=>[t(B,{label:"年份",prop:"year"},{default:o(()=>[t(Y,{modelValue:e(f).year,"onUpdate:modelValue":c[1]||(c[1]=v=>e(f).year=v),format:"YYYY",placeholder:"选择一个年份",style:{width:"100%"},type:"year","value-format":"YYYY"},null,8,["modelValue"])]),_:1}),t(B,{label:"月份",prop:"month"},{default:o(()=>[t(K,{modelValue:e(f).month,"onUpdate:modelValue":c[2]||(c[2]=v=>e(f).month=v),class:"w-100%"},{prefix:o(()=>[Fe]),default:o(()=>[(V(!0),E(U,null,G(e(N),v=>(V(),X(I,{key:v.value,label:v.label+"月",value:v.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(B,{label:"预算",prop:"budget"},{default:o(()=>[t(T,{modelValue:e(f).budget,"onUpdate:modelValue":c[3]||(c[3]=v=>e(f).budget=v),"prefix-icon":e(Z),type:"number"},null,8,["modelValue","prefix-icon"])]),_:1}),t(B,{class:"mt-10"},{default:o(()=>[r("div",qe,[t(_,{class:"mr-4",plain:"",round:"",onClick:c[4]||(c[4]=v=>l.value=!e(l))},{icon:o(()=>[Se]),_:1}),t(_,{plain:"",round:"",type:"primary",onClick:w},{icon:o(()=>[$e]),_:1})])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),Ue=H({__name:"DeleteRecord",props:{database:{type:Object},data:{type:Object,required:!0},currM:{type:String,required:!0},currY:{type:String,required:!0},mList:{type:Array,required:!0}},emits:["onDeleted"],setup(b,{emit:d}){const s=b,u=d;function n(){const a=C.deleteAndReturnNext(s.mList,s.currM);a?(delete s.data.items[s.currM],O.put(s.database,y.DB_RECORD,C.Objects.raw(s.data),s.currY).then(()=>{O.put(s.database,y.DB_CONFIG,{id:y.DB_KEY_CONFIG,Y:s.currY,M:a},y.DB_KEY_CONFIG),u("onDeleted",a)})):A.error("至少保留一条记录")}return(a,i)=>{const l=m("el-button"),f=m("el-popconfirm");return V(),E("div",null,[t(f,{"cancel-button-text":"取消","confirm-button-text":"确定",title:"确定删除该记录？",onConfirm:n},{reference:o(()=>[t(l,{plain:"",round:"",size:"small",type:"danger"},{default:o(()=>[$("删除记录")]),_:1})]),_:1})])}}}),Ge={class:"main"},Ae={class:"mb-4"},Ke=r("div",{class:"mb-2"},"日期",-1),Te={class:"f-c-b"},ze={class:"mb-4"},Le=r("div",{class:"mb-2"},"操作",-1),He={class:"f-c-b"},Je={class:"mb-4"},Pe=r("div",{class:"mb-2"},"数据",-1),Qe={class:"f-c-s text-text-regular text-0.8rem"},We={class:"f-c-c"},Xe=r("div",{class:"i-tabler-coin text-text-secondary mr-1"},null,-1),Ze=r("span",{class:"text-text-secondary mr-1"},"预算",-1),et=r("span",{class:"text-text-secondary mr-1"},"，剩余",-1),tt={class:"f-c-e text-text-regular text-0.8rem"},lt={class:"f-c-c"},at=r("div",{class:"i-tabler-minus text-text-secondary mr-1"},null,-1),ot=r("span",{class:"text-text-secondary mr-1"},"支出",-1),nt=r("span",{class:"text-text-secondary mr-1"},"，增长",-1),rt={class:"f-c-c text-red"},st=r("div",{class:"i-tabler-caret-up"},null,-1),ut={class:"f-c-c text-green"},dt=r("div",{class:"i-tabler-caret-down"},null,-1),it={class:"mb-2 text-0.9rem text-text-secondary"},ct={class:"w-100% f-c-b"},mt={class:"f-c-s"},pt={class:"text-text-secondary"},_t={class:"m-2"},gt=H({__name:"Home",async setup(b){let d,s;const u=([d,s]=z(()=>O.create()),d=await d,s(),d),n=([d,s]=z(()=>O.get(u,y.DB_CONFIG,y.DB_KEY_CONFIG)),d=await d,s(),d),a=h(n.Y),i=h(n.M),l=h(([d,s]=z(()=>O.get(u,y.DB_RECORD,a.value)),d=await d,s(),d)),f=h(Object.keys(l.value.items)),k=h(([d,s]=z(()=>O.keys(u,y.DB_RECORD)),d=await d,s(),d)),M=h(0);function w(){if(!(l!=null&&l.value.items[i.value]))return 0;let D,g=0,v=0;const F=f.value.sort((R,j)=>Number(R)-Number(j)),p=F.findIndex(R=>R===i.value);return p!==-1?(p===0||(l.value.items[F[p-1]].balance.forEach(R=>g+=Number(R.cost)),l.value.items[F[p]].balance.forEach(R=>v+=Number(R.cost))),D=g!==0?(v-g)/g*100*10/10:0):D=0,D}function N(D){let g=0;return D.forEach(v=>{v.type==="收"?g-=Number(v.cost):g+=Number(v.cost)}),g}function x(){if(!(l!=null&&l.value.items[i.value]))return 0;const D=N(l.value.items[i.value].balance);return l.value.items[i.value].surplus=Number(l.value.items[i.value].budget-D),O.put(u,y.DB_RECORD,C.Objects.raw(l.value),a.value).then(()=>{M.value=w()}),l.value.items[i.value].surplus}function c(D){let g=0;return D.forEach(v=>{v.type==="支"&&(g+=Number(v.cost))}),g}function _(){return l!=null&&l.value.items[i.value]?c(l.value.items[i.value].balance):0}function Y(){n.Y=a.value,n.M=i.value,O.put(u,y.DB_CONFIG,C.Objects.raw(n),y.DB_KEY_CONFIG),O.get(u,y.DB_RECORD,a.value).then(D=>{l.value=D,f.value=Object.keys(l.value.items),i.value=f.value[0]})}function B(){n.Y=a.value,n.M=i.value,O.put(u,y.DB_CONFIG,C.Objects.raw(n),y.DB_KEY_CONFIG)}async function I(D){O.get(u,y.DB_RECORD,D).then(g=>{l.value=g,O.keys(u,y.DB_RECORD).then(v=>{k.value=v,a.value=D,f.value=Object.keys(l.value.items),i.value=f.value[0],n.Y=a.value,n.M=i.value,O.put(u,y.DB_CONFIG,C.Objects.raw(n),y.DB_KEY_CONFIG)})})}function K(D){i.value=D,n.Y=a.value,n.M=i.value,O.put(u,y.DB_CONFIG,C.Objects.raw(n),y.DB_KEY_CONFIG)}function T(D){var P;const g={};(((P=D==null?void 0:D.items[i.value])==null?void 0:P.balance)||[]).forEach(R=>{const j=C.Dates.formatDate("YY-MM-DD HH:mm:ss",String(R.datetime)).split(" ")[0];g[j]||(g[j]=[]),g[j].push(R)});const F={},p=Object.keys(g).sort((R,j)=>new Date(R).getTime()-new Date(j).getTime());return n.itemAsc||p.reverse(),p.forEach(R=>{F[R]=g[R]}),F}return(D,g)=>{var te,le,ae,oe,ne,re;const v=m("el-option"),F=m("el-select"),p=je,P=Ne,R=Re,j=m("el-tag"),me=Ve,pe=De,_e=m("el-dropdown");return V(),E("div",Ge,[r("div",Ae,[Ke,r("div",Te,[t(F,{modelValue:e(a),"onUpdate:modelValue":g[0]||(g[0]=q=>L(a)?a.value=q:null),class:"mr-4",onChange:Y},{default:o(()=>[(V(!0),E(U,null,G(e(k),q=>(V(),X(v,{key:q,label:q+"年",value:q},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t(F,{modelValue:e(i),"onUpdate:modelValue":g[1]||(g[1]=q=>L(i)?i.value=q:null),onChange:B},{default:o(()=>[(V(!0),E(U,null,G(e(f),q=>(V(),X(v,{key:q+"月",label:q+"月",value:q},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),r("div",ze,[Le,r("div",He,[t(Ue,{"curr-m":e(i),"curr-y":e(a),data:e(l),database:e(u),"m-list":e(f),onOnDeleted:K},null,8,["curr-m","curr-y","data","database","m-list"]),t(p,{"curr-m":e(i),"curr-y":e(a),data:e(l),database:e(u),"m-list":e(f),onOnCreated:I},null,8,["curr-m","curr-y","data","database","m-list"]),t(P,{"curr-m":e(i),"curr-y":e(a),data:e(l),database:e(u)},null,8,["curr-m","curr-y","data","database"]),t(R,{"curr-m":e(i),"curr-y":e(a),data:e(l),database:e(u)},null,8,["curr-m","curr-y","data","database"])])]),r("div",null,[r("div",Je,[Pe,r("div",Qe,[r("div",We,[Xe,Ze,r("span",null,S((le=(te=e(l))==null?void 0:te.items[e(i)])==null?void 0:le.budget),1),et,Q(r("span",{class:"text-green"},S(x().toFixed(2)),513),[[W,((oe=(ae=e(l))==null?void 0:ae.items[e(i)])==null?void 0:oe.surplus)>=0]]),Q(r("span",{class:"text-red"},S(x().toFixed(2)),513),[[W,((re=(ne=e(l))==null?void 0:ne.items[e(i)])==null?void 0:re.surplus)<0]])])]),r("div",tt,[r("div",lt,[at,ot,r("span",null,S(_().toFixed(2)),1)]),nt,Q(r("div",rt,[$(S(e(M).toFixed(2))+"% ",1),st],512),[[W,e(M)>0]]),Q(r("div",ut,[$(S(e(M).toFixed(2))+"% ",1),dt],512),[[W,e(M)<=0]])])]),r("div",null,[(V(!0),E(U,null,G(T(e(l)),(q,se)=>(V(),E("div",{class:"mb-4",key:se},[r("div",it,S(se),1),(V(!0),E(U,null,G(q,(J,ee)=>(V(),X(_e,{key:ee,class:"w-100% bg-bg-overlay p-4 rd-2 mt-2",trigger:"click"},{dropdown:o(()=>[r("div",_t,[t(me,{"curr-m":e(i),"curr-y":e(a),data:e(l),database:e(u),index:ee,value:J,class:"mb-2"},null,8,["curr-m","curr-y","data","database","index","value"]),t(pe,{"curr-m":e(i),"curr-y":e(a),data:e(l),database:e(u),index:ee,value:J},null,8,["curr-m","curr-y","data","database","index","value"])])]),default:o(()=>[r("div",ct,[r("div",mt,[t(j,{type:J.type=="支"?"danger":"success",class:"mr-4",size:"small"},{default:o(()=>[$(S(J.type),1)]),_:2},1032,["type"]),r("div",null,S(J.text),1)]),r("div",pt,S(J.cost),1)])]),_:2},1024))),128))]))),128))])])])}}});export{gt as default};
