var S;(e=>{e.RECORD="record",e.TALLY_PAD="tally_pad",e.COMMENTS="comments",e.VIEW_DATE="view_date"})(S||(S={}));var w;(e=>{function a(){const s=new Promise((r,u)=>{const o=indexedDB.open(S.TALLY_PAD);o.onsuccess=function(t){const n=t.target.result;r(n)},o.onerror=function(){u(new Error("创建数据库失败！"))},o.onupgradeneeded=function(t){const n=t.target.result,d=n.createObjectStore(S.RECORD,{keyPath:"id"}),f=n.createObjectStore(S.COMMENTS,{keyPath:"id"}),i=n.createObjectStore(S.VIEW_DATE,{keyPath:"id"});d.add({id:"2024",items:{1:{items:[],surplus:0,budget:0}}}),f.add({id:"0",value:"生活费",cost:1800,type:"支"}),i.add({id:"0",Y:"2024",M:"1"})}});return s.catch(r=>{console.error(r)}),s}e.create=a;function c(s,r,u,o){const t=new Promise((n,d)=>{const l=s.transaction([r],"readwrite").objectStore(r).add(u,o);l.onsuccess=function(){n(s)},l.onerror=function(){d(new Error("插入数据错误！"))}});return t.catch(n=>{console.error(n)}),t}e.add=c;function p(s,r,u){const o=new Promise((t,n)=>{const i=s.transaction([r],"readwrite").objectStore(r).delete(u);i.onsuccess=function(){t(s)},i.onerror=function(){n(new Error("删除数据错误！"))}});return o.catch(t=>{console.error(t)}),o}e.drop=p;function g(s,r,u,o){const t=new Promise((n,d)=>{const i=s.transaction([r],"readwrite").objectStore(r),l=i.get(o);l.onsuccess=function(m){i.put(u).onsuccess=function(){n(s)}},l.onerror=function(){d(new Error("更新数据错误！"))}});return t.catch(n=>{console.error(n)}),t}e.put=g;function O(s,r,u){const o=new Promise((t,n)=>{const f=s.transaction([r],"readwrite").objectStore(r);if(u){const i=f.get(u);i.onsuccess=function(){const l=i.result;l?t(l):n(null)},i.onerror=function(){n(null)}}else{const i=f.openCursor();i.onsuccess=function(l){const m=l.target.result;m&&(t(m.value),m.continue())},i.onerror=function(){n(null)}}});return o.catch(t=>{console.error(t)}),o}e.get=O;function _(s,r){const u=new Promise((o,t)=>{const d=s.transaction([r],"readonly").objectStore(r).getAllKeys();d.onsuccess=function(f){o(f.target.result)},d.onerror=function(){t(null)}});return u.catch(o=>{console.error(o)}),u}e.keys=_})(w||(w={}));function h(){const e=new Date;return{y:String(e.getFullYear()),m:String(e.getMonth()+1).padStart(2,"0"),d:String(e.getDate()).padStart(2,"0"),h:String(e.getHours()).padStart(2,"0"),minute:String(e.getMinutes()).padStart(2,"0"),second:String(e.getSeconds()).padStart(2,"0")}}const P=Object.freeze(Object.defineProperty({__proto__:null,generateDate:h},Symbol.toStringTag,{value:"Module"})),M=async(e,a,c)=>{e&&await e.validate(p=>{p?a&&a():c&&c()})},j=(e,a,c)=>{if(!a)return c(new Error("请输入正确格式的金额！"));setTimeout(()=>{const p=a.toString().length;p>=1&&p<=20?c():c(new Error("金额在 1~9 位数！"))},20)},E=Object.freeze(Object.defineProperty({__proto__:null,formValidator:M,validateMoney:j},Symbol.toStringTag,{value:"Module"}));function b(e){if(typeof e!="object"||e===null)return!1;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a))return!0;return!1}function v(e){return JSON.parse(JSON.stringify(e))}const D=Object.freeze(Object.defineProperty({__proto__:null,hasProperties:b,raw:v},Symbol.toStringTag,{value:"Module"}));var y;(e=>{e.Dates=P,e.Forms=E,e.Objects=D;function a(c,p){const g=c.indexOf(p);return g!==-1?c.length===1?null:(c.splice(g,1),g===c.length?c[0]:c[g]):null}e.deleteAndReturnNext=a})(y||(y={}));export{S as C,w as D,y as U};
