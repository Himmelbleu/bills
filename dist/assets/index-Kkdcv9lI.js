var w;(e=>{e.RECORD="record",e.TALLY_PAD="tally_pad",e.COMMENTS="comments",e.VIEW_DATE="view_date"})(w||(w={}));var y;(e=>{function l(){const s=new Promise((t,c)=>{const r=indexedDB.open(w.TALLY_PAD);r.onsuccess=function(n){const o=n.target.result;t(o)},r.onerror=function(){c(new Error("创建数据库失败！"))},r.onupgradeneeded=function(n){const o=n.target.result,a=o.createObjectStore(w.RECORD,{keyPath:"id"}),p=o.createObjectStore(w.COMMENTS,{keyPath:"id"}),u=o.createObjectStore(w.VIEW_DATE,{keyPath:"id"});a.add({id:"2024",items:{1:{balance:[],surplus:0,budget:0}}}),p.add({id:"0",items:[{value:"生活费",cost:1800,type:"支"}]}),u.add({id:"0",Y:"2024",M:"1"})}});return s.catch(t=>{console.error(t)}),s}e.create=l;function g(s,t,c,r){const n=new Promise((o,a)=>{const f=s.transaction([t],"readwrite").objectStore(t).add(c,r);f.onsuccess=function(){o(s)},f.onerror=function(){a(new Error("插入数据错误！"))}});return n.catch(o=>{console.error(o)}),n}e.add=g;function i(s,t,c){const r=new Promise((n,o)=>{const u=s.transaction([t],"readwrite").objectStore(t).delete(c);u.onsuccess=function(){n(s)},u.onerror=function(){o(new Error("删除数据错误！"))}});return r.catch(n=>{console.error(n)}),r}e.drop=i;function S(s,t,c,r){const n=new Promise((o,a)=>{const u=s.transaction([t],"readwrite").objectStore(t),f=u.get(r);f.onsuccess=function(){u.put(c).onsuccess=function(){o(s)}},f.onerror=function(){a(new Error("更新数据错误！"))}});return n.catch(o=>{console.error(o)}),n}e.put=S;function d(s,t,c){const r=new Promise((n,o)=>{const p=s.transaction([t],"readwrite").objectStore(t);if(c){const u=p.get(c);u.onsuccess=function(){const f=u.result;n(f||null)},u.onerror=function(){o(null)}}else{const u=p.openCursor(),f=[];u.onsuccess=function(j){const h=j.target.result;h?(f.push(h.value),h.continue()):n(f)},u.onerror=function(){o(null)}}});return r.catch(n=>{console.error(n)}),r}e.get=d;function m(s,t){const c=new Promise((r,n)=>{const a=s.transaction([t],"readonly").objectStore(t).getAllKeys();a.onsuccess=function(p){r(p.target.result)},a.onerror=function(){n(null)}});return c.catch(r=>{console.error(r)}),c}e.keys=m;function P(s){const t=new Promise((c,r)=>{const n=indexedDB.deleteDatabase(s);n.onsuccess=function(){c(null)},n.onerror=function(){r(null)},n.onblocked=function(){r(null)}});return t.catch(c=>{console.error(c)}),t}e.del=P;function _(s,t){return new Promise((c,r)=>{const a=s.transaction([t],"readwrite").objectStore(t).clear();a.onsuccess=function(){c("")},a.onerror=function(){r("")}})}e.clear=_;function M(s,t,c){const o=s.transaction([c],"readwrite").objectStore(c).add(t);o.onsuccess=function(){console.log("Data added: ",t)},o.onerror=function(){console.error("Error adding data: ")}}e.leadIn=M})(y||(y={}));function E(){const e=new Date;return{y:String(e.getFullYear()),m:String(e.getMonth()+1).padStart(2,"0"),d:String(e.getDate()).padStart(2,"0"),h:String(e.getHours()).padStart(2,"0"),minute:String(e.getMinutes()).padStart(2,"0"),second:String(e.getSeconds()).padStart(2,"0")}}const v=Object.freeze(Object.defineProperty({__proto__:null,generateDate:E},Symbol.toStringTag,{value:"Module"})),T=async(e,l,g)=>{e&&await e.validate(i=>{i?l&&l():g&&g()})},q=(e,l,g)=>{if(!l)return g(new Error("请输入正确格式的金额！"));setTimeout(()=>{const i=l.toString().length;i>=1&&i<=20?g():g(new Error("金额在 1~9 位数！"))},20)},D=Object.freeze(Object.defineProperty({__proto__:null,formValidator:T,validateMoney:q},Symbol.toStringTag,{value:"Module"}));function b(e){if(typeof e!="object"||e===null)return!1;for(const l in e)if(Object.prototype.hasOwnProperty.call(e,l))return!0;return!1}function A(e){return JSON.parse(JSON.stringify(e))}const x=Object.freeze(Object.defineProperty({__proto__:null,hasProperties:b,raw:A},Symbol.toStringTag,{value:"Module"}));var O;(e=>{e.Dates=v,e.Forms=D,e.Objects=x;function l(i,S){const d=i.indexOf(S);return d!==-1?i.length===1?null:(i.splice(d,1),d===i.length?i[0]:i[d]):null}e.deleteAndReturnNext=l,e.createFilter=i=>S=>S.value.includes(i);function g(i){const S=["K","M","B","T"];let d=-1,m=i;for(;m>=1e3&&d<S.length-1;)m/=1e3,d++;return m=Math.round(m*1e3)/1e3,d===-1?i.toString():m+S[d]}e.formatNumberWithUnits=g})(O||(O={}));export{w as C,y as D,O as U};
