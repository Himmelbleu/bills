var S;(e=>{e.RECORD="record",e.TALLY_PAD="tally_pad",e.COMMENTS="comments",e.VIEW_DATE="view_date"})(S||(S={}));var w;(e=>{function a(){const s=new Promise((n,i)=>{const r=indexedDB.open(S.TALLY_PAD);r.onsuccess=function(t){const o=t.target.result;n(o)},r.onerror=function(){i(new Error("创建数据库失败！"))},r.onupgradeneeded=function(t){const o=t.target.result,d=o.createObjectStore(S.RECORD,{keyPath:"id"}),p=o.createObjectStore(S.COMMENTS,{keyPath:"id"}),u=o.createObjectStore(S.VIEW_DATE,{keyPath:"id"});d.add({id:"2024",items:{1:{items:[],surplus:0,budget:0}}}),p.add({id:"0",items:[{value:"生活费",cost:1800,type:"支"}]}),u.add({id:"0",Y:"2024",M:"1"})}});return s.catch(n=>{console.error(n)}),s}e.create=a;function c(s,n,i,r){const t=new Promise((o,d)=>{const f=s.transaction([n],"readwrite").objectStore(n).add(i,r);f.onsuccess=function(){o(s)},f.onerror=function(){d(new Error("插入数据错误！"))}});return t.catch(o=>{console.error(o)}),t}e.add=c;function l(s,n,i){const r=new Promise((t,o)=>{const u=s.transaction([n],"readwrite").objectStore(n).delete(i);u.onsuccess=function(){t(s)},u.onerror=function(){o(new Error("删除数据错误！"))}});return r.catch(t=>{console.error(t)}),r}e.drop=l;function g(s,n,i,r){const t=new Promise((o,d)=>{const u=s.transaction([n],"readwrite").objectStore(n),f=u.get(r);f.onsuccess=function(m){u.put(i).onsuccess=function(){o(s)}},f.onerror=function(){d(new Error("更新数据错误！"))}});return t.catch(o=>{console.error(o)}),t}e.put=g;function O(s,n,i){const r=new Promise((t,o)=>{const p=s.transaction([n],"readwrite").objectStore(n);if(i){const u=p.get(i);u.onsuccess=function(){const f=u.result;f?t(f):o(null)},u.onerror=function(){o(null)}}else{const u=p.openCursor();u.onsuccess=function(f){const m=f.target.result;m&&(t(m.value),m.continue())},u.onerror=function(){o(null)}}});return r.catch(t=>{console.error(t)}),r}e.get=O;function _(s,n){const i=new Promise((r,t)=>{const d=s.transaction([n],"readonly").objectStore(n).getAllKeys();d.onsuccess=function(p){r(p.target.result)},d.onerror=function(){t(null)}});return i.catch(r=>{console.error(r)}),i}e.keys=_;function h(s){const n=new Promise((i,r)=>{const t=indexedDB.deleteDatabase(s);t.onsuccess=function(){i(null)},t.onerror=function(){r(null)},t.onblocked=function(){r(null)}});return n.catch(i=>{console.error(i)}),n}e.del=h})(w||(w={}));function P(){const e=new Date;return{y:String(e.getFullYear()),m:String(e.getMonth()+1).padStart(2,"0"),d:String(e.getDate()).padStart(2,"0"),h:String(e.getHours()).padStart(2,"0"),minute:String(e.getMinutes()).padStart(2,"0"),second:String(e.getSeconds()).padStart(2,"0")}}const M=Object.freeze(Object.defineProperty({__proto__:null,generateDate:P},Symbol.toStringTag,{value:"Module"})),E=async(e,a,c)=>{e&&await e.validate(l=>{l?a&&a():c&&c()})},j=(e,a,c)=>{if(!a)return c(new Error("请输入正确格式的金额！"));setTimeout(()=>{const l=a.toString().length;l>=1&&l<=20?c():c(new Error("金额在 1~9 位数！"))},20)},v=Object.freeze(Object.defineProperty({__proto__:null,formValidator:E,validateMoney:j},Symbol.toStringTag,{value:"Module"}));function D(e){if(typeof e!="object"||e===null)return!1;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a))return!0;return!1}function T(e){return JSON.parse(JSON.stringify(e))}const A=Object.freeze(Object.defineProperty({__proto__:null,hasProperties:D,raw:T},Symbol.toStringTag,{value:"Module"}));var y;(e=>{e.Dates=M,e.Forms=v,e.Objects=A;function a(c,l){const g=c.indexOf(l);return g!==-1?c.length===1?null:(c.splice(g,1),g===c.length?c[0]:c[g]):null}e.deleteAndReturnNext=a,e.createFilter=c=>l=>l.value.includes(c)})(y||(y={}));export{S as C,w as D,y as U};
