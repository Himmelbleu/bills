import{D as v,C as k}from"./index-Bi6GVGuU.js";import{d as V,n as p,r as j,c as l,g as n,t as f,u as d,F as x,f as b,s as E,a as F,o as u,b as A,x as N}from"./index-ByuOe_hF.js";const P=n("div",{class:"mb-4"},[n("div",null,"收支统计"),n("div",{class:"text-0.8rem text-text-secondary"},"统计收支情况")],-1),T={class:"mb-4 f-c-b flex-wrap"},I={class:"flex-basis-33.33% max-w-33.33% mb-2"},L={class:"text-0.8rem"},R={class:"text-gray"},S={class:"flex-basis-33.33% max-w-33.33%"},W={class:"text-0.8rem"},Y={class:"text-red"},q={class:"flex-basis-33.33% max-w-33.33%"},z=n("div",{class:"text-0.8rem"},"剩余",-1),G={class:"text-gray"},H={key:0},J=n("div",null,"支出",-1),K={class:"mt-2 f-c-b flex-wrap"},M={class:"mb-2 flex-basis-50% max-w-50%"},Q={key:1,class:"mt-4"},U=n("div",null,"收入",-1),X={class:"mt-2 f-c-b flex-wrap"},Z={class:"mb-2 flex-basis-50% max-w-50%"},st=V({__name:"Infographic",async setup($){let r,_;const y=([r,_]=p(()=>v.create()),r=await r,_(),r),D=([r,_]=p(()=>v.get(y,k.VIEW_DATE,"0")),r=await r,_(),r),m=j(([r,_]=p(()=>v.get(y,k.RECORD,D.Y)),r=await r,_(),r));function O(a){const e={};for(const t in a.items)if(a.items.hasOwnProperty(t)){const o=a.items[t];o.balance&&o.balance.forEach(s=>{const{type:i,text:c}=s;e[i]||(e[i]={}),e[i][c]||(e[i][c]=[]),e[i][c].push(s)})}return e}const g=a=>E(()=>{function e(t){let o=0;for(let s in t)Array.isArray(t[s])?o+=t[s].reduce((i,c)=>i+(c.hasOwnProperty("cost")?Number(c.cost):0),0):typeof t[s]=="object"&&t[s]!==null&&(o+=e(t[s]));return o}return e(a)});function B(a){function e(t){let o=0;for(let s in t)Array.isArray(t[s])?o+=t[s].length:typeof t[s]=="object"&&t[s]!==null&&(o+=e(t[s]));return o}return e(a)}const w=a=>E(()=>{let e=0;for(let t in a)a.hasOwnProperty(t)&&(e+=Number(a[t].budget));return e}),h=O(m.value);function C(a){if(!a.length)return 0;let e=0;return a.forEach(t=>e+=Number(t.cost)),e}return(a,e)=>{const t=F("el-statistic");return u(),l("div",null,[P,n("div",T,[n("div",I,[n("div",L,"预算 ("+f(Object.keys(d(m).items).length)+")",1),n("div",R,f(w(d(m).items)),1)]),n("div",S,[n("div",W,"支出 ("+f(B(d(h).支||[]))+")",1),n("div",Y,f(g(d(h).支||[])),1)]),n("div",q,[z,n("div",G,f((w(d(m).items).value-g(d(h).支||[]).value).toFixed(2)),1)])]),(u(!0),l(x,null,b(d(h),(o,s)=>(u(),l("div",null,[s==="支"?(u(),l("div",H,[J,n("div",K,[(u(!0),l(x,null,b(o,(i,c)=>(u(),l("div",M,[A(t,{precision:1,title:c+" ("+i.length+")",value:C(i)},null,8,["title","value"])]))),256))])])):N("",!0),s==="收"?(u(),l("div",Q,[U,n("div",X,[(u(!0),l(x,null,b(o,(i,c)=>(u(),l("div",Z,[A(t,{precision:2,title:c+" ("+i.length+")",value:C(i)},null,8,["title","value"])]))),256))])])):N("",!0)]))),256))])}}});export{st as default};
