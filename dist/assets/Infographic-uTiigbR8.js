import{D as h,C as E}from"./index-XVv16cgR.js";import{d as F,n as p,r as I,c as u,g as e,t as m,u as f,F as v,f as b,a as k,o as r,m as A,w as D,b as N,s as B}from"./index-qPElrb1D.js";const L=e("div",{class:"mb-2"},[e("div",null,"收支统计"),e("div",{class:"text-0.8rem text-text-secondary"},"统计相同收支总金额")],-1),P={class:"mb-4 f-c-b flex-nowrap"},R={class:"flex-basis-50% max-w-50%"},S={class:"text-0.8rem"},T={class:"text-red"},W={class:"flex-basis-50% max-w-50%"},Y={class:"text-0.8rem"},q={class:"text-green"},z=e("div",null,[e("div",null,"支出统计"),e("div",{class:"text-0.8rem text-text-secondary"},"相同类型的支出总数和总额")],-1),G={class:"mt-2 f-c-b flex-wrap"},H={class:"mb-4 flex-basis-50% max-w-50%"},J=e("div",null,[e("div",null,"收入统计"),e("div",{class:"text-0.8rem text-text-secondary"},"相同类型的收入总数和总额")],-1),K={class:"mt-2 f-c-b flex-wrap"},M={class:"mb-4 flex-basis-50% max-w-50%"},Z=F({__name:"Infographic",async setup(Q){let o,d;const y=([o,d]=p(()=>h.create()),o=await o,d(),o),V=([o,d]=p(()=>h.get(y,E.VIEW_DATE,"0")),o=await o,d(),o),O=I(([o,d]=p(()=>h.get(y,E.RECORD,V.Y)),o=await o,d(),o));function j(c){const n={};for(const a in c.items)if(c.items.hasOwnProperty(a)){const t=c.items[a];t.balance&&t.balance.forEach(s=>{const{type:l,text:i}=s;n[l]||(n[l]={}),n[l][i]||(n[l][i]=[]),n[l][i].push(s)})}return n}function w(c){let n=0;function a(t){for(let s in t)Array.isArray(t[s])?t[s].forEach(l=>{l.hasOwnProperty("cost")&&(n+=Number(l.cost))}):typeof t[s]=="object"&&t[s]!==null&&a(t[s])}return a(c),n}function g(c){let n=0;function a(t){for(let s in t)Array.isArray(t[s])?n+=t[s].length:typeof t[s]=="object"&&t[s]!==null&&a(t[s])}return a(c),n}const _=j(O.value);function C(c){if(!c.length)return 0;let n=0;return c.forEach(a=>n+=Number(a.cost)),n}return(c,n)=>{const a=k("el-statistic"),t=k("el-card");return r(),u("div",null,[L,e("div",P,[e("div",R,[e("div",S,"总支出 ("+m(g(f(_).支||[]))+")",1),e("div",T,m(w(f(_).支||[])),1)]),e("div",W,[e("div",Y,"总收入 ("+m(g(f(_).收||[]))+")",1),e("div",q,m(w(f(_).收||[])),1)])]),(r(!0),u(v,null,b(f(_),(s,l)=>(r(),u("div",null,[l==="支"?(r(),A(t,{key:0},{default:D(()=>[z,e("div",G,[(r(!0),u(v,null,b(s,(i,x)=>(r(),u("div",H,[N(a,{precision:2,title:x+" ("+i.length+")",value:C(i)},null,8,["title","value"])]))),256))])]),_:2},1024)):B("",!0),l==="收"?(r(),A(t,{key:1,class:"mt-4"},{default:D(()=>[J,e("div",K,[(r(!0),u(v,null,b(s,(i,x)=>(r(),u("div",M,[N(a,{precision:2,title:x+" ("+i.length+")",value:C(i)},null,8,["title","value"])]))),256))])]),_:2},1024)):B("",!0)]))),256))])}}});export{Z as default};
